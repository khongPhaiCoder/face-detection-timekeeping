<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include('../partials/head'); %> <% function
    convertMinutesToHours(minutes) { %> <% var hours = Math.floor(minutes / 60);
    %> <% var remainingMinutes = minutes % 60; %> <% return hours + " hr " +
    remainingMinutes + " min"; %> <% } %>
  </head>
  <body>
    <header><%- include('../partials/header'); %></header>
    <main>
      <div class="container">
        <h2>Current month</h2>
        <table class="table" id="index-table">
          <thead>
            <tr>
              <!-- <th scope="col">#</th> -->
              <th scope="col">Name</th>
              <th scope="col">Email</th>
              <th scope="col">Hours</th>
              <th scope="col">Action</th>
            </tr>
            <!-- <tr>
              <td class="input-table">
                <input type="text" placeholder="Type to Filter..." />
              </td>
              <td class="input-table">
                <input type="text" placeholder="Type to Filter..." />
              </td>
              <td class="input-table">
                <input type="text" placeholder="Type to Filter..." />
              </td>
              <td></td>
            </tr> -->
          </thead>

          <tbody>
            <% users.forEach(user => { %>
            <tr>
              <!-- <th scope="row">1</th> -->
              <td><%= user.name %></td>
              <td><%= user.email %></td>
              <td><%= convertMinutesToHours(user.time) %></td>
              <td>
                <div class="dropdown">
                  <a
                    class="btn"
                    href="#"
                    role="button"
                    data-bs-toggle="dropdown"
                    aria-expanded="false"
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="16"
                      height="16"
                      fill="currentColor"
                      class="bi bi-three-dots"
                      viewBox="0 0 16 16"
                    >
                      <path
                        d="M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"
                      />
                    </svg>
                  </a>

                  <ul class="dropdown-menu">
                    <!-- <li><a class="dropdown-item" onclick="edit_comment('<%= user._id %>')" >Edit</a></li> -->
                    <li>
                      <a
                        href="/timeAnalysis/detail/<%= user._id %>/<%= option %>"
                        class="dropdown-item"
                        >detail</a
                      >
                    </li>
                    <li>
                      <a
                        href="/timeAnalysis/month/<%= user._id %>/<%= option %>"
                        class="dropdown-item"
                        >analysis</a
                      >
                    </li>
                  </ul>
                </div>
              </td>
            </tr>
            <!-- <tr>
              <th scope="row">2</th>
              <td>Jacob</td>
              <td>Thornton@gmail.com</td>
              <td>130</td>
            </tr>
            <tr>
              <th scope="row">3</th>
              <td>Larry the Bird</td>
              <td>Bird@gmail.com</td>
              <td>127</td>
            </tr> -->
            <% }) %>
          </tbody>
        </table>
      </div>
    </main>
    <!-- <%- include('../partials/footer'); %> -->
  </body>
  <script>
    $(document).ready(function () {
      // Setup - add a text input to each footer cell
      $("#index-table thead .datatable-filter-line").each(function () {
        $(this).html('<input type="text"/>');
      });

      // DataTable
      var table = $("#index-table").DataTable({
        initComplete: function () {
          // Apply the search
          this.api()
            .columns()
            .every(function () {
              var that = this;

              $("input", this.header()).on("keyup change clear", function () {
                if (that.search() !== this.value) {
                  that.search(this.value).draw();
                }
              });
            });
        },
      });
    });
  </script>
</html>
